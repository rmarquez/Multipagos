<?xml version="1.0" encoding="UTF-8"?>
<document xmlns:jx="http://apache.org/cocoon/templates/jx/1.0" menu="true">

    <jx:import uri="context://resources/jxmacros/jxgenerales.xml"/>

    <header>
        <title>Visitas x Colector</title>
    </header>
    <body>
        <s1 title="Visitas por Colector">
            <table border="1">
                <thead>
                    <tr>
                        <th align="left" colspan="6">Fecha de Inicio: <formatoFecha fecha="${fechaIni}" patron="dd/MMM/yyyy"/></th>
                        <th align="left" colspan="6">Fecha Final: <formatoFecha fecha="${fechaFin}" patron="dd/MMM/yyyy"/></th>
                        <tr><td colspan="12"/></tr>
                    </tr>
                    <tr>
                        <th>CONTRATO</th>
                        <th>SUSCRIPTOR</th>
                        <th>LOCALIDAD</th>
						<th>FECHA VISITA</th>
                        <th>S#</th>
                        <th>SIMBOLO CLARO</th>
                        <th>OBSERVACION</th>
                        <th>SERVICIO</th>
                        <th>C#</th>
                        <th>COLECTOR</th>
                        <th>AVISO COBRO</th>
                        <th>FECHA PAGO</th>
                    </tr>
                </thead>
                <tbody>
                	<jx:set var="colector" value=""/>                   
 
                    <jx:forEach var="item" items="${bean}" varStatus="status">
	                    
                        <jx:if test="colectorId != item[10]}">
                         <jx:if test="${!status.first}">
                            <tr>
	                           	<th colspan="6">Total</th> 
	                           	<th colspan="6"><jx:formatNumber value="${status.count}"/></th>                             
                       		</tr>
                            </jx:if>
                            <jx:if test="${!status.last}">
                                <tr><td colspan="12"></td></tr>
                            </jx:if>
                            <tr>
                                <th colspan="12">colector: ${item[10]} ${item[11]}</th>                                
                            </tr>
                            
                       </jx:if>
                        <jx:set var="colectorId" value="${item[10]}"/>
                        <tr>
                        	<td align="right">${item[1]}</td>
                            <td align="right">${item[2]}</td>
	                        <td align="right">${item[3]}</td>
                            <td align="right"><formatoFecha fecha="${item[4]}" patron="dd/MMM/yyyy"/></td>
                            <td align="right">${item[5]}</td>
                            <td align="right">${item[6]}</td>
                            <td align="right"></td>
                            <td align="right">${item[7]}</td>
                            <td align="right">${item[9]}</td>
                            <td align="right">${item[10]} ${item[11]}</td>
                            <td align="right">${item[12]}</td>
                            <td align="right"><formatoFecha fecha="${item[13]}" patron="dd/MMM/yyyy"/></td>
                        </tr>                        
                        <jx:if test="${status.last}">
                            <tr>
                             	<th colspan="6">Total</th> 
                             	<th colspan="6"><jx:formatNumber value="${status.count}"/></th>                             
                         	</tr>
                        </jx:if>
                    </jx:forEach>
                </tbody>
            </table>
        </s1>
    </body>
</document>